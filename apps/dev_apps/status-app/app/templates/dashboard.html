<!DOCTYPE html>
<html>
<head>
    <title>Team Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- ✅ Auto-refresh every 30 seconds -->
    <meta http-equiv="refresh" content="30">
</head>
<body>
    <nav>
        <a href="{{ url_for('index') }}">Set Status</a> |
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
    </nav>

    <h1>Team Status Dashboard</h1>

    <!-- ✅ Status Summary -->
    <div class="summary">
        <p><strong>Remote:</strong> {{ summary.remote }}</p>
        <p><strong>Office:</strong> {{ summary.office }}</p>
        <p><strong>Leave:</strong> {{ summary.leave }}</p>
    </div>

    <table>
        <tr>
            <th>User</th>
            <th>Status</th>
            <th>Team</th>
            <th>Updated At</th>
        </tr>
        {% for s in statuses %}
        <tr>
            <td>{{ s.user_id }}</td>
            <td>{{ s.status }}</td>
            <td>{{ s.team }}</td>
            <td>
              {{ s.updated_at.strftime("%b %d, %Y %I:%M %p") }} ({{ s.updated_at|timeago }})
            </td>
        </tr>
        {% endfor %}
    </table>

    {% if last_updated %}
    <p style="margin-top:1rem; font-style:italic; color:#555;">
        Last updated: {{ last_updated }}
    </p>
    {% else %}
    <p style="margin-top:1rem; font-style:italic; color:#555;">
        No updates yet.
    </p>
    {% endif %}
</body>
</html>
